<html>

<head>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="create">
        <input id="privateRoom" type="checkbox">
        <span>Private</span>
        <input id="password" type="text" placeholder="password">
        <span>Password</span>
        <button id="createRoom">CREATE ROOM</button>
    </div>

    <div id="join">
        <button class="joinRoom" data-roomID="someIDA">rma</button>
        <button class="joinRoom" data-roomID="someIDB">rmb</button>
    </div>

    <form action="/logout" method="get" id="logout">
        <button type="submit">LOGOUT</button>
    </form>

    <!-- <ul id="messages"></ul>

    <form action="" id="msgBox" class="hide">
        <input id="m" autocomplete="off" />
        <button>Send</button>
    </form> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.slim.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        $(function () {

            var socket = io();

            $("#createRoom").on("click", function () {
                // boolean
                let private = $("#privateRoom").attr("checked");
                // string or null
                let password = $("#password").value() || null;
                // replace above line with wtever u need
                // as long as i get the 2 value

                // ask server to create a new room
                let settings = {
                    private: private,
                    password: password
                };
                socket.emit("create room", settings)

            });

            socket.on("room created", function (gameObject) {
                // server created new room, go to that room
                // room ID comes as data.roomID

                $.ajax({
                    method: "get",
                    url: "/room",
                    data: gameObject
                })
                .done(res => {
                    $("document").html(res.file);
                })
                .fail( err => {
                    console.log(err);
                });

            });

            $("#join").on('click', ".joinRoom", function () {
                // vvv as long as i get the unique ID of that room
                let roomID = $(this).data("roomID");
                console.log(roomID);

                socket.emit('join room', roomID);

            });

            socket.on("error", msg => {
                alert(msg);
            });

        });
    </script>

</body>

</html>